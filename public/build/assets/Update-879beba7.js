import y from"./Master-91a1bb30.js";import{s as g}from"./multiselect-b6c69853.js";import{_ as k,r as _,o as i,c as n,b as s,t as r,d as l,l as u,w as E,i as h,v as b,n as c,j as f,h as m}from"./app-5ac2130d.js";const U={layout:y,props:["userId"],components:{Multiselect:g},created(){this.fetchUser()},data(){return{form:{user_name:"",email:""},formErrors:[],formStatus:"Yes",RoleOptions:["user","admin","super admin"]}},methods:{fetchUser(){axios.get(route("api.users.show",this.userId),{headers:{Authorization:"Bearer "+this.$page.props.auth_token}}).then(e=>{this.form.user_name=e.data.name,this.form.email=e.data.email,this.form.role=e.data.role}).catch(e=>{toastr.error(e.response.data.message)})},submit(){this.formStatus="No";let e=new FormData;e.append("id",this.userId),e.append("user_name",this.form.user_name),e.append("email",this.form.email),e.append("role",this.form.role),axios.post(route("api.users.update"),e,{headers:{Authorization:"Bearer "+this.$page.props.auth_token}}).then(o=>{toastr.success(this.translate("User updated successfully.")),this.$inertia.get(route("users"))}).catch(o=>{toastr.error(o.response.data.message),o.response.data.errors&&(this.formStatus="Yes",this.formErrors=o.response.data.errors)})}}},w={id:"main",class:"main"},V={class:"pagetitle d-flex justify-content-between"},S={class:"breadcrumb"},I={class:"breadcrumb-item"},M={class:"breadcrumb-item"},B={class:"breadcrumb-item"},N={class:"breadcrumb-item active"},C={class:"section"},D={class:"card"},z={class:"card-body pt-4"},R={class:"row g-3"},Y={class:"col-12 col-md-6"},j={for:"user_name"},A={key:0,class:"invalid-feedback animated fadeIn"},L={class:"col-12 col-md-6"},O={for:"email"},T={key:0,class:"invalid-feedback animated fadeIn"},F={class:"col-12 col-md-6"},G={key:0,class:"invalid-feedback animated fadeIn"},q={class:"mt-5"},H={key:0,type:"submit",class:"btn btn-success"},J={key:1,class:"btn btn-success",type:"button",disabled:""},K=s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1);function P(e,o,Q,W,t,p){const d=_("Link"),v=_("Multiselect");return i(),n("main",w,[s("div",V,[s("div",null,[s("h1",null,r(e.translate("Edit User")),1),s("nav",null,[s("ol",S,[s("li",I,[l(d,{href:e.route("dashboard")},{default:u(()=>[m(r(e.$page.props.website_name),1)]),_:1},8,["href"])]),s("li",M,[l(d,{href:e.route("users")},{default:u(()=>[m(r(e.translate("Users")),1)]),_:1},8,["href"])]),s("li",B,[l(d,{href:e.route("users")},{default:u(()=>[m(r(t.form.user_name),1)]),_:1},8,["href"])]),s("li",N,r(e.translate("Edit")),1)])])]),l(d,{class:"btn btn-success",href:e.route("users")},{default:u(()=>[m(r(e.translate("Go to Users")),1)]),_:1},8,["href"])]),s("section",C,[s("div",D,[s("div",z,[s("form",{onSubmit:o[3]||(o[3]=E((...a)=>p.submit&&p.submit(...a),["prevent"]))},[s("div",R,[s("div",Y,[s("label",j,r(e.translate("User name")),1),h(s("input",{type:"text",class:c(["form-control",{"invalid-bg":t.formErrors.user_name}]),id:"user_name","onUpdate:modelValue":o[0]||(o[0]=a=>t.form.user_name=a)},null,2),[[b,t.form.user_name]]),t.formErrors.user_name?(i(),n("div",A,r(t.formErrors.user_name[0]),1)):f("",!0)]),s("div",L,[s("label",O,r(e.translate("User email")),1),h(s("input",{type:"email",class:c(["form-control",{"invalid-bg":t.formErrors.email}]),id:"email","onUpdate:modelValue":o[1]||(o[1]=a=>t.form.email=a)},null,2),[[b,t.form.email]]),t.formErrors.email?(i(),n("div",T,r(t.formErrors.email[0]),1)):f("",!0)]),s("div",F,[s("label",null,r(e.translate("Role")),1),l(v,{id:"",modelValue:t.form.role,"onUpdate:modelValue":o[2]||(o[2]=a=>t.form.role=a),options:t.RoleOptions,searchable:!0,class:c({"invalid-bg":t.formErrors.role})},null,8,["modelValue","options","class"]),t.formErrors.role?(i(),n("div",G,r(t.formErrors.role[0]),1)):f("",!0)])]),s("div",q,[t.formStatus=="Yes"?(i(),n("button",H,r(e.translate("Save")),1)):(i(),n("button",J,[m(r(e.translate("Save"))+" ",1),K]))])],32)])])])])}const $=k(U,[["render",P]]);export{$ as default};

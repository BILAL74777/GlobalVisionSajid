import{_ as b,a as u,o as r,c as n,b as e,h as p,F as v,g as f,w as E,i as d,v as c,n as h,t as i,j as y,e as F}from"./app-ec0684be.js";import g from"./Master-3764f6a3.js";const x={layout:g,data(){return{employees:[],employeeForm:{name:"",email:"",phone:"",address:"",id:"",commission:""},employeeErrors:{},employeeStatus:1}},created(){this.fetchEmployees()},methods:{openModal(t=null){t?this.employeeForm={...t}:this.clearFields();const l=document.getElementById("employeeModal");new bootstrap.Modal(l).show()},clearFields(){this.employeeForm={name:"",email:"",phone:"",address:"",commission:"",id:null},this.employeeErrors={}},editEmployee(t){this.openModal(t)},fetchEmployees(){u.get(route("api.employees.fetch")).then(t=>{this.employees=t.data}).catch(t=>{console.error(t)})},validateEmployeeForm(){this.employeeErrors={},this.employeeForm.name||(this.employeeErrors.name="Name is required."),this.employeeForm.email||(this.employeeErrors.email="Email is required."),this.employeeForm.commission||(this.employeeErrors.commission="Commission is required."),this.employeeForm.phone||(this.employeeErrors.phone="Phone Number is required.")},submitEmployee(){if(this.validateEmployeeForm(),Object.keys(this.employeeErrors).length>0)return;this.employeeStatus=0;const t=route("api.employee.store");u({method:"post",url:t,data:this.employeeForm}).then(()=>{toastr.success("Employee saved successfully."),this.fetchEmployees(),this.employeeStatus=1,this.clearFields(),this.$refs.closeModal.click()}).catch(a=>{this.employeeStatus=1,toastr.error(a.response.data.message),a.response.data.errors&&(this.employeeErrors=a.response.data.errors)})}}},k={id:"main",class:"main"},M={class:"pagetitle d-flex justify-content-between"},N=F('<div><h1 class="theme-text-color">Employees</h1><nav><ol class="breadcrumb"><li class="breadcrumb-item"><a href="dashboard">Global Vision</a></li><li class="breadcrumb-item active">Employees</li></ol></nav></div>',1),S=e("i",{class:"bi bi-plus-lg"},null,-1),w={class:"section"},V={class:"card"},C={class:"card-body"},A=e("h5",{class:"card-title theme-text-color"}," Employee Records ",-1),I={class:"table-responsive"},U={class:"table table-striped"},q=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"Name"),e("th",{scope:"col"},"Email"),e("th",{scope:"col"},"Commission"),e("th",{scope:"col"},"Phone"),e("th",{scope:"col"},"Address"),e("th",{scope:"col"},"Actions")])],-1),B={scope:"row"},j=["href"],P=["onClick"],D=e("i",{class:"bi bi-pencil"},null,-1),O=[D],R={class:"modal fade",id:"employeeModal",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false"},T={class:"modal-dialog"},z={class:"modal-content"},G={class:"modal-header"},L=e("h5",{class:"modal-title"},"Employee Registration",-1),H={type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",ref:"closeModal"},J={class:"modal-body"},K={class:"row g-3"},Q={class:"col-12"},W=e("label",{class:"form-label"},[p("Name"),e("i",{class:"text-danger"},"*")],-1),X={key:0,class:"invalid-feedback"},Y={class:"col-12"},Z=e("label",{class:"form-label"},[p("Commission"),e("i",{class:"text-danger"},"*")],-1),$={key:0,class:"invalid-feedback"},ee={class:"col-12"},se=e("label",{class:"form-label"},[p("Phone"),e("i",{class:"text-danger"},"*")],-1),oe={key:0,class:"invalid-feedback"},le={class:"col-12"},te=e("label",{class:"form-label"},[p("Email"),e("i",{class:"text-danger"},"*")],-1),ie={key:0,class:"invalid-feedback"},re={class:"col-12"},ne=e("label",{class:"form-label"},"Address (Optional)",-1),ae=["disabled"];function me(t,l,a,de,s,m){return r(),n("main",k,[e("div",M,[N,e("div",null,[e("button",{class:"btn btn-success mt-3","data-bs-toggle":"modal","data-bs-target":"#employeeModal",onClick:l[0]||(l[0]=(...o)=>m.clearFields&&m.clearFields(...o))},[S,p(" Add New Employee ")])])]),e("section",w,[e("div",V,[e("div",C,[A,e("div",I,[e("table",U,[q,e("tbody",null,[(r(!0),n(v,null,f(s.employees,(o,_)=>(r(),n("tr",{key:o.id},[e("th",B,i(_+1),1),e("td",null,[e("a",{class:"theme-text-color",href:t.route("employee.details",o.id)},i(o.name),9,j)]),e("td",null,i(o.email),1),e("td",null,i(o.commission)+"%",1),e("td",null,i(o.phone||"N/A"),1),e("td",null,i(o.address||"N/A"),1),e("td",null,[e("button",{class:"btn btn-sm btn-warning",onClick:ce=>m.editEmployee(o)},O,8,P)])]))),128))])])])])]),e("div",R,[e("div",T,[e("div",z,[e("div",G,[L,e("button",H,null,512)]),e("div",J,[e("form",{onSubmit:l[6]||(l[6]=E((...o)=>m.submitEmployee&&m.submitEmployee(...o),["prevent"]))},[e("div",K,[e("div",Q,[W,d(e("input",{type:"text",class:h(["form-control",{"is-invalid":s.employeeErrors.name}]),"onUpdate:modelValue":l[1]||(l[1]=o=>s.employeeForm.name=o)},null,2),[[c,s.employeeForm.name]]),s.employeeErrors.name?(r(),n("div",X,i(s.employeeErrors.name),1)):y("",!0)]),e("div",Y,[Z,d(e("input",{type:"number",class:h(["form-control",{"is-invalid":s.employeeErrors.commission}]),"onUpdate:modelValue":l[2]||(l[2]=o=>s.employeeForm.commission=o)},null,2),[[c,s.employeeForm.commission]]),s.employeeErrors.commission?(r(),n("div",$,i(s.employeeErrors.commission),1)):y("",!0)]),e("div",ee,[se,d(e("input",{type:"text",class:h(["form-control",{"is-invalid":s.employeeErrors.phone}]),"onUpdate:modelValue":l[3]||(l[3]=o=>s.employeeForm.phone=o)},null,2),[[c,s.employeeForm.phone]]),s.employeeErrors.phone?(r(),n("div",oe,i(s.employeeErrors.phone),1)):y("",!0)]),e("div",le,[te,d(e("input",{type:"email",class:h(["form-control",{"is-invalid":s.employeeErrors.email}]),"onUpdate:modelValue":l[4]||(l[4]=o=>s.employeeForm.email=o)},null,2),[[c,s.employeeForm.email]]),s.employeeErrors.email?(r(),n("div",ie,i(s.employeeErrors.email),1)):y("",!0)]),e("div",re,[ne,d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[5]||(l[5]=o=>s.employeeForm.address=o)},null,512),[[c,s.employeeForm.address]])])]),e("button",{type:"submit",class:"btn btn-success mt-3",disabled:s.employeeStatus===0},i(s.employeeStatus===1?"Save Employee":"Saving..."),9,ae)],32)])])])])])])}const ye=b(x,[["render",me]]);export{ye as default};

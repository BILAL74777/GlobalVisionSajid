import f from"./Master-5fe0b7c2.js";import{s as g}from"./multiselect-c4a2e9a0.js";import{_ as p,o as r,c,b as t,t as s,F as _,g as h,h as l,j as D,e as k,p as M,f as C}from"./app-0ac8fc53.js";const x={layout:f,components:{Multiselect:g},props:["referral","transactions","groupedData"],data(){return{transactionDetails:null,selectedYear:new Date().getFullYear(),selectedMonth:new Date().getMonth()+1,years:Array.from({length:10},(n,d)=>new Date().getFullYear()-d),months:[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}]}},mounted(){this.$nextTick(()=>{$("#transactionsTable").DataTable({responsive:!0,autoWidth:!1,paging:!0,searching:!0,ordering:!0,lengthMenu:[15,30,100],language:{search:"Search:",lengthMenu:"Show _MENU_ entries",info:"Showing _START_ to _END_ of _TOTAL_ entries",paginate:{first:"First",last:"Last",next:"Next",previous:"Previous"}}})})},methods:{formatCurrency(n){return` ${parseFloat(n).toFixed(2)}`},showDetails(n){const d=n.transactions[0].visa;d&&(this.transactionDetails={...d,familyMembers:[d,...n.transactions[0].familyMembers]})}},computed:{totalCashIn(){return this.groupedData.reduce((n,d)=>n+d.total_cash_in,0)},totalCashOut(){return this.groupedData.reduce((n,d)=>n+d.total_cash_out,0)},totalCommissionAmount(){return this.groupedData.reduce((n,d)=>n+d.total_commission_amount,0)}}},a=n=>(M("data-v-d30be417"),n=n(),C(),n),T={id:"main",class:"main"},w={class:"pagetitle d-flex justify-content-between"},F={class:"theme-text-color"},A=k('<nav data-v-d30be417><ol class="breadcrumb" data-v-d30be417><li class="breadcrumb-item" data-v-d30be417><a href="dashboard" data-v-d30be417>TTC Global</a></li><li class="breadcrumb-item" data-v-d30be417>Referral</li><li class="breadcrumb-item active" data-v-d30be417>Details</li></ol></nav>',1),S={class:"section"},I={class:"card"},N={class:"card-body"},P=a(()=>t("h5",{class:"card-title theme-text-color"},"Transactions",-1)),V={class:"table-responsive"},G={class:"table table-striped",id:"transactionsTable"},L=a(()=>t("thead",null,[t("tr",null,[t("th",null,"Transaction Type"),t("th",null,"Phone #"),t("th",null,"Tracking ID"),t("th",null,"Actual Amount"),t("th",null,"Net Amount"),t("th",null,"Referral Percentage")])],-1)),O=["onClick"],B={key:0},E={style:{color:"green"}},J={key:1},R=a(()=>t("br",null,null,-1)),Y={style:{color:"green"}},j={class:"table-success"},U=a(()=>t("td",{colspan:"3"},[t("strong",null,"Total")],-1)),W={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false"},q={class:"modal-dialog modal-lg",role:"document"},z={class:"modal-content"},H=a(()=>t("div",{class:"modal-header"},[t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),K={key:0,class:"modal-body"},Q={class:"row"},X={class:"text-success"},Z={key:0,class:"col-12"},tt={class:"card"},st={class:"card-body p-3"},et=a(()=>t("strong",null,"Full Name:",-1)),at=a(()=>t("strong",null,"Phone:",-1)),lt=a(()=>t("strong",null,"Tracking ID:",-1)),nt=a(()=>t("strong",null,"Status:",-1)),ot=a(()=>t("strong",null,"Amount:",-1)),it=a(()=>t("strong",null,"Visa Fee:",-1)),rt=a(()=>t("strong",null,"Gmail:",-1)),ct=a(()=>t("strong",null,"Pak Visa Password:",-1)),dt=a(()=>t("strong",null,"Gender:",-1)),ut={class:"card"},_t={class:"card-header text-success"},ht={class:"card-body p-3"},mt=a(()=>t("strong",null,"Full Name:",-1)),bt=a(()=>t("strong",null,"Phone:",-1)),vt=a(()=>t("strong",null,"Tracking ID:",-1)),yt=a(()=>t("strong",null,"Status:",-1)),ft=a(()=>t("strong",null,"Amount:",-1)),gt=a(()=>t("strong",null,"Visa Fee:",-1)),pt=a(()=>t("strong",null,"Gmail:",-1)),Dt=a(()=>t("strong",null,"Pak Visa Password:",-1)),kt=a(()=>t("strong",null,"Gender:",-1)),Mt={class:"card"},Ct={class:"card-header text-success"},xt={class:"card-body p-3"},Tt=a(()=>t("strong",null,"Full Name:",-1)),wt=a(()=>t("strong",null,"Phone:",-1)),Ft=a(()=>t("strong",null,"Tracking ID:",-1)),At=a(()=>t("strong",null,"Status:",-1)),St=a(()=>t("strong",null,"Amount:",-1)),It=a(()=>t("strong",null,"Visa Fee:",-1)),Nt=a(()=>t("strong",null,"Gmail:",-1)),Pt=a(()=>t("strong",null,"Pak Visa Password:",-1)),Vt=a(()=>t("strong",null,"Gender:",-1));function Gt(n,d,b,Lt,i,o){var v,y;return r(),c("main",T,[t("div",w,[t("div",null,[t("h1",F,s(b.referral.name),1),A])]),t("section",S,[t("div",I,[t("div",N,[P,t("div",V,[t("table",G,[L,t("tbody",null,[(r(!0),c(_,null,h(b.groupedData,e=>{var u;return r(),c("tr",{key:e.parent_id},[t("td",{"data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:m=>o.showDetails(e),style:{"font-weight":"bold","text-align":"left",cursor:"pointer"}},[e.transactions[0].visa&&e.transactions[0].visa.entry_type==="Family"?(r(),c("div",B,[t("span",null,s(e.transactions[0].visa.family_name),1),t("div",E,[t("b",null,s(e.transactions[0].visa.full_name),1),(r(!0),c(_,null,h(e.transactions[0].familyMembers,m=>(r(),c("div",{key:m.id},[t("b",null,s(m.full_name),1)]))),128))])])):(r(),c("div",J,[l(" Individual "),R,t("b",Y,s((u=e.transactions[0].visa)==null?void 0:u.full_name),1)]))],8,O),t("td",null,s(e.transactions[0].visa.phone_number),1),t("td",null,s(e.transactions[0].visa.tracking_id),1),t("td",null,s(o.formatCurrency(e.total_cash_in)),1),t("td",null,s(o.formatCurrency(e.total_cash_out)),1),t("td",null,s(o.formatCurrency(e.total_commission_amount)),1)])}),128))]),t("tfoot",null,[t("tr",j,[U,t("td",null,s(o.formatCurrency(o.totalCashIn)),1),t("td",null,s(o.formatCurrency(o.totalCashOut)),1),t("td",null,s(o.formatCurrency(o.totalCommissionAmount)),1)])])])])])])]),t("div",W,[t("div",q,[t("div",z,[H,(y=(v=i.transactionDetails)==null?void 0:v.familyMembers)!=null&&y.length?(r(),c("div",K,[t("div",Q,[t("h4",X,s(i.transactionDetails.family_name??"Individual Apply"),1),i.transactionDetails.familyMembers.length===1?(r(),c("div",Z,[t("div",tt,[t("div",st,[t("p",null,[et,l(" "+s(i.transactionDetails.familyMembers[0].full_name),1)]),t("p",null,[at,l(" "+s(i.transactionDetails.familyMembers[0].phone_number),1)]),t("p",null,[lt,l(" "+s(i.transactionDetails.familyMembers[0].tracking_id),1)]),t("p",null,[nt,l(" "+s(i.transactionDetails.familyMembers[0].status),1)]),t("p",null,[ot,l(" "+s(o.formatCurrency(i.transactionDetails.familyMembers[0].amount)),1)]),t("p",null,[it,l(" "+s(o.formatCurrency(i.transactionDetails.familyMembers[0].visa_fee)),1)]),t("p",null,[rt,l(" "+s(i.transactionDetails.familyMembers[0].gmail),1)]),t("p",null,[ct,l(" "+s(i.transactionDetails.familyMembers[0].pak_visa_password),1)]),t("p",null,[dt,l(" "+s(i.transactionDetails.familyMembers[0].gender),1)])])])])):i.transactionDetails.familyMembers.length===2?(r(!0),c(_,{key:1},h(i.transactionDetails.familyMembers,(e,u)=>(r(),c("div",{class:"col-md-6",key:e.id},[t("div",ut,[t("div",_t,[t("b",null,"Member #"+s(u+1),1)]),t("div",ht,[t("p",null,[mt,l(" "+s(e.full_name),1)]),t("p",null,[bt,l(" "+s(e.phone_number),1)]),t("p",null,[vt,l(" "+s(e.tracking_id),1)]),t("p",null,[yt,l(" "+s(e.status),1)]),t("p",null,[ft,l(" "+s(o.formatCurrency(e.amount)),1)]),t("p",null,[gt,l(" "+s(o.formatCurrency(e.visa_fee)),1)]),t("p",null,[pt,l(" "+s(e.gmail),1)]),t("p",null,[Dt,l(" "+s(e.pak_visa_password),1)]),t("p",null,[kt,l(" "+s(e.gender),1)])])])]))),128)):(r(!0),c(_,{key:2},h(i.transactionDetails.familyMembers,(e,u)=>(r(),c("div",{class:"col-md-6",key:e.id},[t("div",Mt,[t("div",Ct,[t("b",null,"Member #"+s(u+1),1)]),t("div",xt,[t("p",null,[Tt,l(" "+s(e.full_name),1)]),t("p",null,[wt,l(" "+s(e.phone_number),1)]),t("p",null,[Ft,l(" "+s(e.tracking_id),1)]),t("p",null,[At,l(" "+s(e.status),1)]),t("p",null,[St,l(" "+s(o.formatCurrency(e.amount)),1)]),t("p",null,[It,l(" "+s(o.formatCurrency(e.visa_fee)),1)]),t("p",null,[Nt,l(" "+s(e.gmail),1)]),t("p",null,[Pt,l(" "+s(e.pak_visa_password),1)]),t("p",null,[Vt,l(" "+s(e.gender),1)])])])]))),128))])])):D("",!0)])])])])}const Jt=p(x,[["render",Gt],["__scopeId","data-v-d30be417"]]);export{Jt as default};

import p from"./Master-c7b86318.js";import{s as b}from"./multiselect-bb7a507c.js";import"./main-85c946de.js";import{_ as v,a as c,r as w,o as i,c as l,b as s,F as y,g,w as U,i as m,v as u,n,t as r,j as d,d as k,h as E,e as x}from"./app-45803b45.js";const V={layout:p,created(){this.fetchUsers()},components:{Multiselect:b},data(){return{Users:[],deleteId:null,downloadBtnStatus:1,Users_ids:"",form:{user_id:"",user_name:"",email:"",role:"",password:"",confirm_password:""},RoleOptions:["super admin","employee","referral"],formErrors:[],formStatus:1}},methods:{fetchUsers(){c.get(route("api.users.fetch"),{headers:{Authorization:"Bearer "+this.$page.props.auth_token}}).then(a=>{this.Users=a.data.users,this.Users_ids=a.data.users_ids}).catch(a=>{toastr.error(a.response.data.message)})},deleteThis(a){c.delete(route("api.users.delete",a),{headers:{Authorization:"Bearer "+this.$page.props.auth_token}}).then(()=>{toastr.success("User deleted successfully."),this.fetchUsers()}).catch(o=>{toastr.error(o.response.data.message)})},submit(){this.formStatus=0,c.post(route("api.users.store"),this.form,{headers:{Authorization:"Bearer "+this.$page.props.auth_token}}).then(()=>{this.form.user_id?toastr.success("User record updated."):toastr.success("New user created."),this.$refs.closeModal.click(),this.fetchUsers(),this.formStatus=1}).catch(a=>{this.formStatus=1,toastr.error(a.response.data.message),a.response.data.errors&&(this.formErrors=a.response.data.errors)})},clearFields(){this.form.user_id="",this.form.user_name="",this.form.email="",this.form.role="",this.form.password="",this.form.confirm_password="",this.formErrors=[]},showUser(a){c.get(route("api.users.show",a),{headers:{Authorization:"Bearer "+this.$page.props.auth_token}}).then(o=>{this.form.user_id=o.data.id,this.form.user_name=o.data.name,this.form.email=o.data.email,this.form.role=o.data.role}).catch(o=>{toastr.error(o.response.data.message)})}}},S={id:"main",class:"main"},M=x('<div class="pagetitle d-flex justify-content-between"><div><h1>User</h1><nav><ol class="breadcrumb"><li class="breadcrumb-item"><a href="dashboard">TTC Global</a></li><li class="breadcrumb-item active">Users</li></ol></nav></div></div>',1),B={class:"section"},I={class:"card"},C={class:"card-body pt-4"},N={class:"table-responsive"},z={class:"table table-striped"},T=s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"text-center"},"#"),s("th",{scope:"col"},r("User name")),s("th",{scope:"col"},r("User email")),s("th",{scope:"col"},r("User Role"))])],-1),A={class:"text-center"},R={class:"modal fade",id:"usermodal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},D={class:"modal-dialog modal-lg"},F={class:"modal-content"},j=s("div",{class:"modal-header"},[s("div",{class:"section-title mt-1"},[s("h5",{class:"c-theme-red"},"User form")]),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),L={class:"modal-body"},O={class:"card card-body p-3"},G={class:"row g-3"},q={class:"col-12 col-md-6"},H=s("label",{for:"user_name"},r("User name"),-1),J={key:0,class:"invalid-feedback animated fadeIn"},K={class:"col-12 col-md-6"},P=s("label",{for:"email"},r("User email"),-1),Q={key:0,class:"invalid-feedback animated fadeIn"},W={class:"col-12 col-md-12"},X=s("label",null,r("Role"),-1),Y={key:0,class:"invalid-feedback animated fadeIn"},Z={key:0,class:"row g-3"},$={class:"col-12 col-md-6"},ss=s("label",{for:"password"},r("User password"),-1),es={key:0,class:"invalid-feedback animated fadeIn"},os={class:"col-12 col-md-6"},rs=s("label",{for:"confirm_password"},r("Confirm password"),-1),ts={key:0,class:"invalid-feedback animated fadeIn"},as={class:"mt-5"},is={key:0,type:"submit",class:"btn btn-success"},ls={key:1,class:"btn btn-success",type:"button",disabled:""},ds=s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),ns={hidden:"hidden","data-bs-toggle":"modal","data-bs-target":"#usermodal",title:"Delete",ref:"closeModal"};function cs(a,o,ms,us,e,_){const h=w("Multiselect");return i(),l("main",S,[M,s("section",B,[s("div",I,[s("div",C,[s("div",N,[s("table",z,[T,s("tbody",null,[(i(!0),l(y,null,g(e.Users,(t,f)=>(i(),l("tr",{key:t.id},[s("th",A,r(f+1),1),s("td",null,r(t.name),1),s("td",null,r(t.email),1),s("td",null,r(t.role),1)]))),128))])])])])])]),s("div",R,[s("div",D,[s("div",F,[j,s("div",L,[s("div",O,[s("form",{onSubmit:o[5]||(o[5]=U((...t)=>_.submit&&_.submit(...t),["prevent"]))},[s("div",G,[s("div",q,[H,m(s("input",{type:"text",class:n(["form-control",{"invalid-bg":e.formErrors.user_name}]),id:"user_name","onUpdate:modelValue":o[0]||(o[0]=t=>e.form.user_name=t)},null,2),[[u,e.form.user_name]]),e.formErrors.user_name?(i(),l("div",J,r(e.formErrors.user_name[0]),1)):d("",!0)]),s("div",K,[P,m(s("input",{type:"email",class:n(["form-control",{"invalid-bg":e.formErrors.email}]),id:"email","onUpdate:modelValue":o[1]||(o[1]=t=>e.form.email=t)},null,2),[[u,e.form.email]]),e.formErrors.email?(i(),l("div",Q,r(e.formErrors.email[0]),1)):d("",!0)]),s("div",W,[X,k(h,{id:"",modelValue:e.form.role,"onUpdate:modelValue":o[2]||(o[2]=t=>e.form.role=t),options:e.RoleOptions,searchable:!0,class:n({"invalid-bg":e.formErrors.role})},null,8,["modelValue","options","class"]),e.formErrors.role?(i(),l("div",Y,r(e.formErrors.role[0]),1)):d("",!0)]),e.form.user_id?d("",!0):(i(),l("div",Z,[s("div",$,[ss,m(s("input",{type:"password",class:n(["form-control",{"invalid-bg":e.formErrors.password}]),id:"password","onUpdate:modelValue":o[3]||(o[3]=t=>e.form.password=t)},null,2),[[u,e.form.password]]),e.formErrors.password?(i(),l("div",es,r(e.formErrors.password[0]),1)):d("",!0)]),s("div",os,[rs,m(s("input",{type:"password",class:n(["form-control",{"invalid-bg":e.formErrors.confirm_password}]),id:"confirm_password","onUpdate:modelValue":o[4]||(o[4]=t=>e.form.confirm_password=t)},null,2),[[u,e.form.confirm_password]]),e.formErrors.confirm_password?(i(),l("div",ts,r(e.formErrors.confirm_password[0]),1)):d("",!0)])]))]),s("div",as,[e.formStatus==1?(i(),l("button",is,r("Save"))):(i(),l("button",ls,[E(r("Save")+" "),ds]))])],32)])])])]),s("button",ns,null,512)])])}const bs=v(V,[["render",cs]]);export{bs as default};

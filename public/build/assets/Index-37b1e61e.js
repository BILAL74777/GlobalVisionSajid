import{_,a as y,o as r,c as m,b as e,h as b,F as E,g as v,w as f,i as d,v as c,n as p,t as i,j as h,e as F}from"./app-1cdcaa82.js";import g from"./Master-7e8cd8ef.js";import"http://ttcglobal.test/backend/assets/vendor/bootstrap/js/bootstrap.bundle.min.js";const k={layout:g,data(){return{employees:[],employeeForm:{name:"",email:"",phone:"",address:"",id:"",commission:""},employeeErrors:{},employeeStatus:1}},created(){this.fetchEmployees()},methods:{openModal(t=null){t?this.employeeForm={...t}:this.clearFields();const l=document.getElementById("employeeModal");new bootstrap.Modal(l).show()},clearFields(){this.employeeForm={name:"",email:"",phone:"",address:"",commission:"",id:null},this.employeeErrors={}},editEmployee(t){this.openModal(t)},fetchEmployees(){y.get(route("api.employees.fetch")).then(t=>{this.employees=t.data}).catch(t=>{console.error(t)})},validateEmployeeForm(){this.employeeErrors={},this.employeeForm.name||(this.employeeErrors.name="Name is required."),this.employeeForm.email||(this.employeeErrors.email="Email is required."),this.employeeForm.commission||(this.employeeErrors.commission="Commission is required."),this.employeeForm.phone||(this.employeeErrors.phone="Phone Number is required.")},submitEmployee(){if(this.validateEmployeeForm(),Object.keys(this.employeeErrors).length>0)return;this.employeeStatus=0;const t=route("api.employee.store");y({method:"post",url:t,data:this.employeeForm}).then(()=>{toastr.success("Employee saved successfully."),this.fetchEmployees(),this.employeeStatus=1,this.clearFields(),document.getElementById("employeeModal").click()}).catch(n=>{this.employeeStatus=1,toastr.error(n.response.data.message),n.response.data.errors&&(this.employeeErrors=n.response.data.errors)})}}},x={id:"main",class:"main"},N={class:"pagetitle d-flex justify-content-between"},S=F('<div><h1 class="theme-text-color">Employees</h1><nav><ol class="breadcrumb"><li class="breadcrumb-item"><a href="dashboard">TTC Global</a></li><li class="breadcrumb-item active">Employees</li></ol></nav></div>',1),w=e("i",{class:"bi bi-plus-lg"},null,-1),C={class:"section"},M={class:"card"},V={class:"card-body"},A=e("h5",{class:"card-title theme-text-color"}," Employee Records ",-1),I={class:"table table-striped"},B=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"Name"),e("th",{scope:"col"},"Email"),e("th",{scope:"col"},"Commission"),e("th",{scope:"col"},"Phone"),e("th",{scope:"col"},"Address"),e("th",{scope:"col"},"Actions")])],-1),U={scope:"row"},q=["href"],T=["onClick"],j=e("i",{class:"bi bi-pencil"},null,-1),P=[j],D={class:"modal fade",id:"employeeModal",tabindex:"-1","aria-hidden":"true"},O={class:"modal-dialog"},R={class:"modal-content"},z=e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"Employee Registration"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),G={class:"modal-body"},L={class:"row g-3"},H={class:"col-12"},J=e("label",{class:"form-label"},"Name",-1),K={key:0,class:"invalid-feedback"},Q={class:"col-12"},W=e("label",{class:"form-label"},"Commission",-1),X={key:0,class:"invalid-feedback"},Y={class:"col-12"},Z=e("label",{class:"form-label"},"Phone",-1),$={key:0,class:"invalid-feedback"},ee={class:"col-12"},se=e("label",{class:"form-label"},"Email",-1),oe={key:0,class:"invalid-feedback"},le={class:"col-12"},te=e("label",{class:"form-label"},"Address (Optional)",-1),ie=["disabled"];function re(t,l,n,me,s,a){return r(),m("main",x,[e("div",N,[S,e("div",null,[e("button",{class:"btn btn-success mt-3","data-bs-toggle":"modal","data-bs-target":"#employeeModal",onClick:l[0]||(l[0]=(...o)=>a.clearFields&&a.clearFields(...o))},[w,b(" Add New Employee ")])])]),e("section",C,[e("div",M,[e("div",V,[A,e("table",I,[B,e("tbody",null,[(r(!0),m(E,null,v(s.employees,(o,u)=>(r(),m("tr",{key:o.id},[e("th",U,i(u+1),1),e("td",null,[e("a",{class:"theme-text-color",href:t.route("employee.details",o.id)},i(o.name),9,q)]),e("td",null,i(o.email),1),e("td",null,i(o.commission)+"%",1),e("td",null,i(o.phone||"N/A"),1),e("td",null,i(o.address||"N/A"),1),e("td",null,[e("button",{class:"btn btn-sm btn-warning",onClick:ne=>a.editEmployee(o)},P,8,T)])]))),128))])])])]),e("div",D,[e("div",O,[e("div",R,[z,e("div",G,[e("form",{onSubmit:l[6]||(l[6]=f((...o)=>a.submitEmployee&&a.submitEmployee(...o),["prevent"]))},[e("div",L,[e("div",H,[J,d(e("input",{type:"text",class:p(["form-control",{"is-invalid":s.employeeErrors.name}]),"onUpdate:modelValue":l[1]||(l[1]=o=>s.employeeForm.name=o)},null,2),[[c,s.employeeForm.name]]),s.employeeErrors.name?(r(),m("div",K,i(s.employeeErrors.name),1)):h("",!0)]),e("div",Q,[W,d(e("input",{type:"number",class:p(["form-control",{"is-invalid":s.employeeErrors.commission}]),"onUpdate:modelValue":l[2]||(l[2]=o=>s.employeeForm.commission=o)},null,2),[[c,s.employeeForm.commission]]),s.employeeErrors.commission?(r(),m("div",X,i(s.employeeErrors.commission),1)):h("",!0)]),e("div",Y,[Z,d(e("input",{type:"text",class:p(["form-control",{"is-invalid":s.employeeErrors.phone}]),"onUpdate:modelValue":l[3]||(l[3]=o=>s.employeeForm.phone=o)},null,2),[[c,s.employeeForm.phone]]),s.employeeErrors.phone?(r(),m("div",$,i(s.employeeErrors.phone),1)):h("",!0)]),e("div",ee,[se,d(e("input",{type:"email",class:p(["form-control",{"is-invalid":s.employeeErrors.email}]),"onUpdate:modelValue":l[4]||(l[4]=o=>s.employeeForm.email=o)},null,2),[[c,s.employeeForm.email]]),s.employeeErrors.email?(r(),m("div",oe,i(s.employeeErrors.email),1)):h("",!0)]),e("div",le,[te,d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[5]||(l[5]=o=>s.employeeForm.address=o)},null,512),[[c,s.employeeForm.address]])])]),e("button",{type:"submit",class:"btn btn-success mt-3",disabled:s.employeeStatus===0},i(s.employeeStatus===1?"Save Employee":"Saving..."),9,ie)],32)])])])])])])}const pe=_(k,[["render",re]]);export{pe as default};

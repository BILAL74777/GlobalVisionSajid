import w from"./Master-d102b14f.js";import{_ as h,a as f,r as g,o as l,c as n,b as s,d as y,l as v,w as V,i as m,v as u,n as d,t,j as c,m as p,h as _}from"./app-71c72f56.js";import{s as P}from"./multiselect-bb22ed02.js";const k={layout:w,props:["userId"],created(){this.fetchCustomerRecord()},components:{Multiselect:P},data(){return{form:{name:"",email:"",current_password:"",new_password:"",confirm_password:""},formErrors:[],formStatus:"Yes",oldPasswordVisible:!1,passwordVisible:!1,confirmPasswordVisible:!1}},methods:{fetchCustomerRecord(){f.get(route("api.profile.show",this.userId),{headers:{Authorization:"Bearer "+this.$page.props.auth_token}}).then(r=>{this.form.name=r.data.name,this.form.email=r.data.email,this.existing_image=r.data.image}).catch(r=>{toastr.error(r.response.data.message)})},submit(){this.formStatus="No";let r=new FormData;r.append("id",this.userId),r.append("name",this.form.name),r.append("email",this.form.email),r.append("new_password",this.form.new_password),r.append("current_password",this.form.current_password),r.append("confirm_password",this.form.confirm_password),r.append("image",this.form.image),f.post(route("api.profile.update"),r,{headers:{Authorization:"Bearer "+this.$page.props.auth_token}}).then(e=>{toastr.success("Profile updated successfully"),this.$inertia.get(route("login"))}).catch(e=>{toastr.error(e.response.data.message),e.response.data.errors&&(this.formStatus="Yes",this.formErrors=e.response.data.errors)})},croppedImgSubmit(r){this.form.image=r},toggleOldPasswordVisibility(){this.oldPasswordVisible=!this.oldPasswordVisible},togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible},toggleConfirmPasswordVisibility(){this.confirmPasswordVisible=!this.confirmPasswordVisible}}},E={id:"main",class:"main"},x={class:"pagetitle d-flex justify-content-between"},C=s("h1",null,t("Update Profile"),-1),I={class:"breadcrumb"},S={class:"breadcrumb-item"},U=s("li",{class:"breadcrumb-item"},t("Profile"),-1),N=s("li",{class:"breadcrumb-item active"},t("Update Profile"),-1),B={class:"section"},D={class:"card"},M={class:"card-body pt-4"},O=s("input",{type:"text",name:"fakeuser",style:{display:"none"}},null,-1),z=s("input",{type:"password",name:"fakepass",style:{display:"none"}},null,-1),Y={class:"row g-3"},j={class:"col-12 col-md-6"},A=s("label",{for:"name"},t("Name"),-1),L={key:0,class:"invalid-feedback animated fadeIn"},R={class:"col-12 col-md-6"},T=s("label",{for:"email"},t("Email"),-1),F={key:0,class:"invalid-feedback animated fadeIn"},q={class:"col-12 col-md-6"},G=s("label",{for:"current_password"},t("Old Password"),-1),H={class:"input-group"},J=["type"],K={key:0,class:"invalid-feedback animated fadeIn"},Q={class:"col-12 col-md-6"},W=s("label",{for:"new_password"},t("New Password"),-1),X={class:"input-group"},Z=["type"],$={key:0,class:"invalid-feedback animated fadeIn"},ss={class:"col-12 col-md-6"},os=s("label",{for:"confirm_password"},t("Confirm Password"),-1),es={class:"input-group"},rs=["type"],is={key:0,class:"invalid-feedback animated fadeIn"},ts={class:"mt-5"},as={key:0,type:"submit",class:"btn btn-success"},ls={key:1,class:"btn btn-success",type:"button",disabled:""},ns=s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1);function ds(r,e,ms,cs,o,a){const b=g("Link");return l(),n("main",E,[s("div",x,[s("div",null,[C,s("nav",null,[s("ol",I,[s("li",S,[y(b,{href:r.route("dashboard")},{default:v(()=>[_(t(r.$page.props.website_name),1)]),_:1},8,["href"])]),U,N])])])]),s("section",B,[s("div",D,[s("div",M,[s("form",{onSubmit:e[8]||(e[8]=V((...i)=>a.submit&&a.submit(...i),["prevent"])),autocomplete:"off"},[O,z,s("div",Y,[s("div",j,[A,m(s("input",{type:"text",class:d(["form-control",{"invalid-bg":o.formErrors.name}]),id:"name",autocomplete:"off","onUpdate:modelValue":e[0]||(e[0]=i=>o.form.name=i)},null,2),[[u,o.form.name]]),o.formErrors.name?(l(),n("div",L,t(o.formErrors.name[0]),1)):c("",!0)]),s("div",R,[T,m(s("input",{type:"email",class:d(["form-control",{"invalid-bg":o.formErrors.email}]),"onUpdate:modelValue":e[1]||(e[1]=i=>o.form.email=i),autocomplete:"off",readonly:""},null,2),[[u,o.form.email]]),o.formErrors.email?(l(),n("div",F,t(o.formErrors.email[0]),1)):c("",!0)]),s("div",q,[G,s("div",H,[m(s("input",{type:o.oldPasswordVisible?"text":"password",class:d(["form-control",{"invalid-bg":o.formErrors.current_password}]),autocomplete:"new-password","onUpdate:modelValue":e[2]||(e[2]=i=>o.form.current_password=i)},null,10,J),[[p,o.form.current_password]]),s("span",{class:"input-group-text",onClick:e[3]||(e[3]=(...i)=>a.toggleOldPasswordVisibility&&a.toggleOldPasswordVisibility(...i))},[s("i",{class:d(a.toggleOldPasswordVisibility?"bi bi-eye-slash":"bi bi-eye")},null,2)])]),o.formErrors.current_password?(l(),n("div",K,t(o.formErrors.current_password[0]),1)):c("",!0)]),s("div",Q,[W,s("div",X,[m(s("input",{type:o.passwordVisible?"text":"password",class:d(["form-control",{"invalid-bg":o.formErrors.new_password}]),"onUpdate:modelValue":e[4]||(e[4]=i=>o.form.new_password=i),autocomplete:"off"},null,10,Z),[[p,o.form.new_password]]),s("span",{class:"input-group-text",onClick:e[5]||(e[5]=(...i)=>a.togglePasswordVisibility&&a.togglePasswordVisibility(...i))},[s("i",{class:d(o.passwordVisible?"bi bi-eye-slash":"bi bi-eye")},null,2)])]),o.formErrors.new_password?(l(),n("div",$,t(o.formErrors.new_password[0]),1)):c("",!0)]),s("div",ss,[os,s("div",es,[m(s("input",{type:o.confirmPasswordVisible?"text":"password",class:d(["form-control",{"invalid-bg":o.formErrors.confirm_password}]),id:"confirm_password","onUpdate:modelValue":e[6]||(e[6]=i=>o.form.confirm_password=i),autocomplete:"off"},null,10,rs),[[p,o.form.confirm_password]]),s("span",{class:"input-group-text",onClick:e[7]||(e[7]=(...i)=>a.toggleConfirmPasswordVisibility&&a.toggleConfirmPasswordVisibility(...i))},[s("i",{class:d(o.confirmPasswordVisible?"bi bi-eye-slash":"bi bi-eye")},null,2)])]),o.formErrors.confirm_password?(l(),n("div",is,t(o.formErrors.confirm_password[0]),1)):c("",!0)])]),s("div",ts,[o.formStatus=="Yes"?(l(),n("button",as,t("Save"))):(l(),n("button",ls,[_(t("Save")+" "),ns]))])],32)])])])])}const _s=h(k,[["render",ds]]);export{_s as default};

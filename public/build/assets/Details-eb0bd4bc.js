import b from"./Master-b366b3dc.js";import{s as f}from"./multiselect-fa15a20c.js";import{_ as v,o as r,c,b as t,t as e,F as _,g as h,h as n,j as y,e as g,p,f as D}from"./app-6bbf5856.js";const C={layout:b,components:{Multiselect:f},props:["referral","transactions","groupedData"],data(){return{showModal:!1,transactionDetails:null,selectedYear:new Date().getFullYear(),selectedMonth:new Date().getMonth()+1,years:Array.from({length:10},(s,u)=>new Date().getFullYear()-u),months:[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}]}},mounted(){this.$nextTick(()=>{$("#transactionsTable").DataTable({responsive:!0,autoWidth:!1,paging:!0,searching:!0,ordering:!0,lengthMenu:[15,30,100],language:{search:"Search:",lengthMenu:"Show _MENU_ entries",info:"Showing _START_ to _END_ of _TOTAL_ entries",paginate:{first:"First",last:"Last",next:"Next",previous:"Previous"}}})})},methods:{formatCurrency(s){return` ${parseFloat(s).toFixed(2)}`},showDetails(s){this.transactionDetails=s.transactions[0].visa,s.transactions[0].visa.entry_type==="Family"&&(this.transactionDetails.familyMembers=s.transactions[0].familyMembers),this.showModal=!0}},computed:{totalCashIn(){return this.groupedData.reduce((s,u)=>s+u.total_cash_in,0)},totalCashOut(){return this.groupedData.reduce((s,u)=>s+u.total_cash_out,0)},totalCommissionAmount(){return this.groupedData.reduce((s,u)=>s+u.total_commission_amount,0)}}},l=s=>(p("data-v-cbdacb9f"),s=s(),D(),s),k={id:"main",class:"main"},T={class:"pagetitle d-flex justify-content-between"},M={class:"theme-text-color"},w=g('<nav data-v-cbdacb9f><ol class="breadcrumb" data-v-cbdacb9f><li class="breadcrumb-item" data-v-cbdacb9f><a href="dashboard" data-v-cbdacb9f>TTC Global</a></li><li class="breadcrumb-item" data-v-cbdacb9f>Referral</li><li class="breadcrumb-item active" data-v-cbdacb9f>Details</li></ol></nav>',1),x={class:"section"},F={class:"card"},A={class:"card-body"},S=l(()=>t("h5",{class:"card-title theme-text-color"},"Transactions",-1)),I={class:"table table-striped",id:"transactionsTable"},N=l(()=>t("thead",null,[t("tr",null,[t("th",null,"Transaction Type"),t("th",null,"Phone #"),t("th",null,"Tracking ID"),t("th",null,"Actual Amount"),t("th",null,"Net Amount"),t("th",null,"Referral Percentage")])],-1)),V=["onClick"],G={key:0},P={type:"none",style:{color:"green"}},O={key:1,style:{color:"green"}},R={class:"table-primary"},B=l(()=>t("td",{colspan:"3"},[t("strong",null,"Total")],-1)),E={key:0,class:"modal",tabindex:"-1",style:{display:"block"}},J={class:"modal-dialog"},L={class:"modal-content"},Y={class:"modal-header"},j=l(()=>t("h5",{class:"modal-title"},"Visa Record Details",-1)),U={class:"modal-body"},W={key:0},q=l(()=>t("strong",null,"Full Name:",-1)),z=l(()=>t("strong",null,"Phone:",-1)),H=l(()=>t("strong",null,"Tracking ID:",-1)),K=l(()=>t("strong",null,"Status:",-1)),Q=l(()=>t("strong",null,"Amount:",-1)),X=l(()=>t("strong",null,"Visa Fee:",-1)),Z=l(()=>t("strong",null,"Gmail:",-1)),tt=l(()=>t("strong",null,"Gender:",-1)),et={key:1},at=l(()=>t("strong",null,"Full Name:",-1)),lt=l(()=>t("strong",null,"Phone:",-1)),st=l(()=>t("strong",null,"Tracking ID:",-1)),nt=l(()=>t("strong",null,"Status:",-1)),ot=l(()=>t("strong",null,"Amount:",-1)),it=l(()=>t("strong",null,"Visa Fee:",-1)),rt=l(()=>t("strong",null,"Gmail:",-1)),ct=l(()=>t("strong",null,"Gender:",-1));function ut(s,u,m,dt,i,o){return r(),c("main",k,[t("div",T,[t("div",null,[t("h1",M,e(m.referral.name),1),w])]),t("section",x,[t("div",F,[t("div",A,[S,t("table",I,[N,t("tbody",null,[(r(!0),c(_,null,h(m.groupedData,a=>(r(),c("tr",{key:a.parent_id},[t("td",{onClick:d=>o.showDetails(a),style:{"font-weight":"bold","text-align":"left"}},[t("div",null,[n(e(a.transactions.length>1?"Family":"Individual")+" ",1),a.transactions.length>1?(r(),c("div",G,[t("div",P,[(r(!0),c(_,null,h(a.transactions[0].familyMembers,d=>(r(),c("div",{key:d.id}," - "+e(d.full_name),1))),128))])])):(r(),c("div",O,e(a.transactions[0].visa.full_name),1))])],8,V),t("td",null,e(a.transactions[0].visa.phone_number),1),t("td",null,e(a.transactions[0].visa.tracking_id),1),t("td",null,e(o.formatCurrency(a.total_cash_in)),1),t("td",null,e(o.formatCurrency(a.total_cash_out)),1),t("td",null,e(o.formatCurrency(a.total_commission_amount)),1)]))),128))]),t("tfoot",null,[t("tr",R,[B,t("td",null,e(o.formatCurrency(o.totalCashIn)),1),t("td",null,e(o.formatCurrency(o.totalCashOut)),1),t("td",null,e(o.formatCurrency(o.totalCommissionAmount)),1)])])])])])]),i.showModal?(r(),c("div",E,[t("div",J,[t("div",L,[t("div",Y,[j,t("button",{type:"button",class:"btn-close",onClick:u[0]||(u[0]=a=>i.showModal=!1)})]),t("div",U,[i.transactionDetails.entry_type==="Individual"?(r(),c("div",W,[t("p",null,[q,n(" "+e(i.transactionDetails.full_name),1)]),t("p",null,[z,n(" "+e(i.transactionDetails.phone_number),1)]),t("p",null,[H,n(" "+e(i.transactionDetails.tracking_id),1)]),t("p",null,[K,n(" "+e(i.transactionDetails.status),1)]),t("p",null,[Q,n(" "+e(o.formatCurrency(i.transactionDetails.amount)),1)]),t("p",null,[X,n(" "+e(o.formatCurrency(i.transactionDetails.visa_fee)),1)]),t("p",null,[Z,n(" "+e(i.transactionDetails.gmail),1)]),t("p",null,[tt,n(" "+e(i.transactionDetails.gender),1)])])):(r(),c("div",et,[(r(!0),c(_,null,h(i.transactionDetails.familyMembers,a=>(r(),c("div",{key:a.id},[t("p",null,[at,n(" "+e(a.full_name),1)]),t("p",null,[lt,n(" "+e(a.phone_number),1)]),t("p",null,[st,n(" "+e(a.tracking_id),1)]),t("p",null,[nt,n(" "+e(a.status),1)]),t("p",null,[ot,n(" "+e(o.formatCurrency(a.amount)),1)]),t("p",null,[it,n(" "+e(o.formatCurrency(a.visa_fee)),1)]),t("p",null,[rt,n(" "+e(a.gmail),1)]),t("p",null,[ct,n(" "+e(a.gender),1)])]))),128))]))])])])])):y("",!0)])}const bt=v(C,[["render",ut],["__scopeId","data-v-cbdacb9f"]]);export{bt as default};

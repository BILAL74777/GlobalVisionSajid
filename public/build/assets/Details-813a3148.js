import m from"./Master-673fec18.js";import{s as p}from"./multiselect-6cae437a.js";import{_ as b,r as f,o as r,c as i,b as t,t as o,d as _,F as v,g as A,e as g}from"./app-d303ce7e.js";const F={layout:m,components:{Multiselect:p},props:["transactions","referral"],data(){return{selectedYear:new Date().getFullYear(),selectedMonth:new Date().getMonth()+1,selectedVisa:{}}},computed:{filteredTransactions(){return this.transactions.filter(e=>{const s=new Date(e.created_at);return s.getFullYear()===this.selectedYear&&s.getMonth()+1===this.selectedMonth})},totalActualAmount(){return this.filteredTransactions.reduce((e,s)=>{const n=parseFloat(s.cash_in);return e+(isNaN(n)?0:n)},0).toFixed(2)},totalNetAmount(){return this.filteredTransactions.reduce((e,s)=>e+(parseFloat(s.cash_in||0)-parseFloat(s.cash_out||0)),0).toFixed(2)},totalAmountReceived(){return this.filteredTransactions.reduce((e,s)=>e+parseFloat(this.calculateAmountAfterCommission(s)),0).toFixed(2)}},methods:{openModal(e){this.selectedVisa=e,new bootstrap.Modal(document.getElementById("visaModal")).show()},formatDate(e){return new Date(e).toLocaleDateString()},calculateNetAmount(e){const s=parseFloat(e.cash_in||0),n=parseFloat(e.cash_out||0);return(s-n).toFixed(2)},calculateAmountAfterCommission(e){const s=parseFloat(e.cash_in||0),n=parseFloat(e.cash_out||0),d=s-n;return(parseFloat(e.referral_commission||0)/100*d).toFixed(2)},totalActualAmount(){return this.filteredTransactions.reduce((e,s)=>e+parseFloat(s.amount||0),0).toFixed(2)},totalNetAmount(){return this.filteredTransactions.reduce((e,s)=>e+(parseFloat(s.cash_in||0)-parseFloat(s.cash_out||0)),0).toFixed(2)},totalAmountReceived(){return this.filteredTransactions.reduce((e,s)=>e+parseFloat(this.calculateAmountAfterCommission(s)),0).toFixed(2)}}},V={id:"main",class:"main"},x={class:"pagetitle d-flex justify-content-between"},w={class:"theme-text-color"},D=g('<nav><ol class="breadcrumb"><li class="breadcrumb-item"><a href="dashboard">TTC Global</a></li><li class="breadcrumb-item">Referral</li><li class="breadcrumb-item active">Details</li></ol></nav>',1),M={class:"section"},T={class:"card p-3"},N={class:"d-flex gap-2 align-items-center"},k={class:"section"},C={class:"card"},S={class:"card-body"},Y=t("h5",{class:"card-title theme-text-color"},"Transactions",-1),P={class:"table table-striped"},R=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"border p-2"},"Name"),t("th",{class:"border p-2"},"Phone"),t("th",{class:"border p-2"},"Status"),t("th",{class:"border p-2"},"Tracking ID"),t("th",{class:"border p-2"},"Date"),t("th",{class:"border p-2"},"Actual Amount"),t("th",{class:"border p-2"},"Commission (%)"),t("th",{class:"border p-2"},"Net Amount"),t("th",{class:"border p-2"}," Amount Referral Will Receive ")])],-1),I=["onClick"],B={class:"border p-2"},E={class:"border p-2"},y={class:"border p-2"},G={class:"border p-2"},L={class:"border p-2"},O={class:"border p-2"},U={class:"border p-2 text-green-600"},j={class:"border p-2 font-bold text-blue-600"},W={class:"bg-gray-100 font-bold"},q=t("td",{class:"border p-2 text-center",colspan:"5"}," Total ",-1),z={class:"border p-2"},H=t("td",{class:"border p-2"}," - ",-1),J={class:"border p-2 text-green-600"},K={class:"border p-2 text-blue-600"},Q={class:"modal fade",id:"visaModal",tabindex:"-1","aria-labelledby":"modalTitle","aria-hidden":"true"},X={class:"modal-dialog"},Z={class:"modal-content"},$={class:"modal-header"},tt={class:"modal-title",id:"modalTitle"},et=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),st={class:"modal-body"},ot={class:"table table-striped"},at=t("th",{scope:"row"},"Phone Number",-1),lt=t("th",{scope:"row"},"Status",-1),ct=t("th",{scope:"row"},"Amount",-1),nt=t("th",{scope:"row"},"Visa Fee",-1),rt=t("th",{scope:"row"},"Tracking ID",-1),it=t("th",{scope:"row"},"Email",-1),dt=t("th",{scope:"row"},"Gender",-1),ut=t("th",{scope:"row"},"Date",-1),_t=t("th",{scope:"row"},"Pak Visa Password",-1);function ht(e,s,n,d,a,c){const u=f("Multiselect");return r(),i("main",V,[t("div",x,[t("div",null,[t("h1",w,o(n.referral.name),1),D])]),t("section",M,[t("div",T,[t("div",N,[_(u,{modelValue:a.selectedYear,"onUpdate:modelValue":s[0]||(s[0]=l=>a.selectedYear=l),options:e.years,searchable:!0,placeholder:"Select Year"},null,8,["modelValue","options"]),_(u,{modelValue:a.selectedMonth,"onUpdate:modelValue":s[1]||(s[1]=l=>a.selectedMonth=l),options:e.months,searchable:!0,placeholder:"Select Month"},null,8,["modelValue","options"])])])]),t("section",k,[t("div",C,[t("div",S,[Y,t("table",P,[R,t("tbody",null,[(r(!0),i(v,null,A(c.filteredTransactions,(l,h)=>(r(),i("tr",{key:h,class:"text-center"},[t("td",null,[t("a",{href:"#",class:"theme-text-color",onClick:mt=>c.openModal(l.visa)},o(l.visa.full_name),9,I)]),t("td",B,o(l.visa.phone_number),1),t("td",E,o(l.visa.status),1),t("td",y,o(l.visa.tracking_id),1),t("td",G,o(c.formatDate(l.created_at)),1),t("td",L,o(l.cash_in||"-"),1),t("td",O,o(l.referral_commission||"-"),1),t("td",U,o(c.calculateNetAmount(l)),1),t("td",j,o(c.calculateAmountAfterCommission(l)),1)]))),128))]),t("tfoot",W,[t("tr",null,[q,t("td",z,o(c.totalActualAmount),1),H,t("td",J,o(c.totalNetAmount),1),t("td",K,o(c.totalAmountReceived),1)])])])])])]),t("div",Q,[t("div",X,[t("div",Z,[t("div",$,[t("h5",tt,o(a.selectedVisa.full_name),1),et]),t("div",st,[t("table",ot,[t("tbody",null,[t("tr",null,[at,t("td",null,o(a.selectedVisa.phone_number),1)]),t("tr",null,[lt,t("td",null,o(a.selectedVisa.status),1)]),t("tr",null,[ct,t("td",null,o(a.selectedVisa.amount),1)]),t("tr",null,[nt,t("td",null,o(a.selectedVisa.visa_fee),1)]),t("tr",null,[rt,t("td",null,o(a.selectedVisa.tracking_id),1)]),t("tr",null,[it,t("td",null,o(a.selectedVisa.gmail),1)]),t("tr",null,[dt,t("td",null,o(a.selectedVisa.gender),1)]),t("tr",null,[ut,t("td",null,o(a.selectedVisa.date),1)]),t("tr",null,[_t,t("td",null,o(a.selectedVisa.pak_visa_password),1)])])])])])])])])}const vt=b(F,[["render",ht]]);export{vt as default};

import v from"./Master-728e0684.js";import{s as f}from"./multiselect-af8c35db.js";import{_ as y,o as r,c,b as t,t as e,F as _,g as h,h as a,j as g,e as p,p as b,f as D}from"./app-aaa4b9b1.js";const k={layout:v,components:{Multiselect:f},props:["referral","transactions","groupedData"],data(){return{showModal:!1,transactionDetails:null,selectedYear:new Date().getFullYear(),selectedMonth:new Date().getMonth()+1,years:Array.from({length:10},(n,u)=>new Date().getFullYear()-u),months:[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}]}},mounted(){this.$nextTick(()=>{$("#transactionsTable").DataTable({responsive:!0,autoWidth:!1,paging:!0,searching:!0,ordering:!0,lengthMenu:[15,30,100],language:{search:"Search:",lengthMenu:"Show _MENU_ entries",info:"Showing _START_ to _END_ of _TOTAL_ entries",paginate:{first:"First",last:"Last",next:"Next",previous:"Previous"}}})})},methods:{formatCurrency(n){return` ${parseFloat(n).toFixed(2)}`},showDetails(n){this.transactionDetails=n.transactions[0].visa,n.transactions[0].visa.entry_type==="Family"&&(this.transactionDetails.familyMembers=n.transactions[0].familyMembers),this.showModal=!0}},computed:{totalCashIn(){return this.groupedData.reduce((n,u)=>n+u.total_cash_in,0)},totalCashOut(){return this.groupedData.reduce((n,u)=>n+u.total_cash_out,0)},totalCommissionAmount(){return this.groupedData.reduce((n,u)=>n+u.total_commission_amount,0)}}},l=n=>(b("data-v-e0872f98"),n=n(),D(),n),C={id:"main",class:"main"},w={class:"pagetitle d-flex justify-content-between"},M={class:"theme-text-color"},T=p('<nav data-v-e0872f98><ol class="breadcrumb" data-v-e0872f98><li class="breadcrumb-item" data-v-e0872f98><a href="dashboard" data-v-e0872f98>TTC Global</a></li><li class="breadcrumb-item" data-v-e0872f98>Referral</li><li class="breadcrumb-item active" data-v-e0872f98>Details</li></ol></nav>',1),x={class:"section"},F={class:"card"},A={class:"card-body"},S=l(()=>t("h5",{class:"card-title theme-text-color"},"Transactions",-1)),I={class:"table table-striped",id:"transactionsTable"},N=l(()=>t("thead",null,[t("tr",null,[t("th",null,"Transaction Type"),t("th",null,"Phone #"),t("th",null,"Tracking ID"),t("th",null,"Actual Amount"),t("th",null,"Net Amount"),t("th",null,"Referral Percentage")])],-1)),P=["onClick"],V={key:0},G={type:"none",style:{color:"green"}},O={key:1,style:{color:"green"}},R={class:"table-success"},B=l(()=>t("td",{colspan:"3"},[t("strong",null,"Total")],-1)),E={key:0,class:"modal",tabindex:"-1",style:{display:"block"}},J={class:"modal-dialog"},L={class:"modal-content"},Y={class:"modal-header"},j=l(()=>t("h5",{class:"modal-title"},"Visa Record Details",-1)),U={class:"modal-body"},W={key:0},q=l(()=>t("strong",null,"Full Name:",-1)),z=l(()=>t("strong",null,"Phone:",-1)),H=l(()=>t("strong",null,"Tracking ID:",-1)),K=l(()=>t("strong",null,"Status:",-1)),Q=l(()=>t("strong",null,"Amount:",-1)),X=l(()=>t("strong",null,"Visa Fee:",-1)),Z=l(()=>t("strong",null,"Gmail:",-1)),tt=l(()=>t("strong",null,"Pak visa password:",-1)),et=l(()=>t("strong",null,"Gender:",-1)),st={key:1},lt={class:"text-success"},at=l(()=>t("strong",null,"Full Name:",-1)),nt=l(()=>t("strong",null,"Phone:",-1)),ot=l(()=>t("strong",null,"Tracking ID:",-1)),it=l(()=>t("strong",null,"Status:",-1)),rt=l(()=>t("strong",null,"Amount:",-1)),ct=l(()=>t("strong",null,"Visa Fee:",-1)),ut=l(()=>t("strong",null,"Gmail:",-1)),dt=l(()=>t("strong",null,"Pak visa password:",-1)),_t=l(()=>t("strong",null,"Gender:",-1)),ht=l(()=>t("hr",null,null,-1));function mt(n,u,m,vt,i,o){return r(),c("main",C,[t("div",w,[t("div",null,[t("h1",M,e(m.referral.name),1),T])]),t("section",x,[t("div",F,[t("div",A,[S,t("table",I,[N,t("tbody",null,[(r(!0),c(_,null,h(m.groupedData,s=>(r(),c("tr",{key:s.parent_id},[t("td",{onClick:d=>o.showDetails(s),style:{"font-weight":"bold","text-align":"left"}},[t("div",null,[a(e(s.transactions.length>1?"Family":"Individual")+" ",1),s.transactions.length>1?(r(),c("div",V,[t("div",G,[(r(!0),c(_,null,h(s.transactions[0].familyMembers,d=>(r(),c("div",{key:d.id}," - "+e(d.full_name),1))),128))])])):(r(),c("div",O,e(s.transactions[0].visa.full_name),1))])],8,P),t("td",null,e(s.transactions[0].visa.phone_number),1),t("td",null,e(s.transactions[0].visa.tracking_id),1),t("td",null,e(o.formatCurrency(s.total_cash_in)),1),t("td",null,e(o.formatCurrency(s.total_cash_out)),1),t("td",null,e(o.formatCurrency(s.total_commission_amount)),1)]))),128))]),t("tfoot",null,[t("tr",R,[B,t("td",null,e(o.formatCurrency(o.totalCashIn)),1),t("td",null,e(o.formatCurrency(o.totalCashOut)),1),t("td",null,e(o.formatCurrency(o.totalCommissionAmount)),1)])])])])])]),i.showModal?(r(),c("div",E,[t("div",J,[t("div",L,[t("div",Y,[j,t("button",{type:"button",class:"btn-close",onClick:u[0]||(u[0]=s=>i.showModal=!1)})]),t("div",U,[i.transactionDetails.entry_type==="Individual"?(r(),c("div",W,[t("p",null,[q,a(" "+e(i.transactionDetails.full_name),1)]),t("p",null,[z,a(" "+e(i.transactionDetails.phone_number),1)]),t("p",null,[H,a(" "+e(i.transactionDetails.tracking_id),1)]),t("p",null,[K,a(" "+e(i.transactionDetails.status),1)]),t("p",null,[Q,a(" "+e(o.formatCurrency(i.transactionDetails.amount)),1)]),t("p",null,[X,a(" "+e(o.formatCurrency(i.transactionDetails.visa_fee)),1)]),t("p",null,[Z,a(" "+e(i.transactionDetails.gmail),1)]),t("p",null,[tt,a(" "+e(i.transactionDetails.pak_visa_password),1)]),t("p",null,[et,a(" "+e(i.transactionDetails.gender),1)])])):(r(),c("div",st,[(r(!0),c(_,null,h(i.transactionDetails.familyMembers,(s,d)=>(r(),c("div",{key:s.id},[t("h4",lt,"Member # "+e(d+1),1),t("p",null,[at,a(" "+e(s.full_name),1)]),t("p",null,[nt,a(" "+e(s.phone_number),1)]),t("p",null,[ot,a(" "+e(s.tracking_id),1)]),t("p",null,[it,a(" "+e(s.status),1)]),t("p",null,[rt,a(" "+e(o.formatCurrency(s.amount)),1)]),t("p",null,[ct,a(" "+e(o.formatCurrency(s.visa_fee)),1)]),t("p",null,[ut,a(" "+e(s.gmail),1)]),t("p",null,[dt,a(" "+e(s.pak_visa_password),1)]),t("p",null,[_t,a(" "+e(s.gender),1)]),ht]))),128))]))])])])])):g("",!0)])}const pt=y(k,[["render",mt],["__scopeId","data-v-e0872f98"]]);export{pt as default};
